<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Recycle Islands VR - Plastic Island</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.min.js"></script>
    <script src="https://unpkg.com/super-hands@3.0.4/dist/super-hands.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>

    <script src="../js/island.js"></script>
    <script src="../js/delete-on-contact.js"></script>
  </head>

  <body>
    <a-scene physics="gravity: -9.8; debug: false">
      <a-assets>
        <a-asset-item
          id="palmModel"
          src="../assets/textures/Trees/Palm.glb"
        ></a-asset-item>
        <a-asset-item
          id="plasticItem1"
          src="../assets/plastic-trash/Bottle.glb"
        ></a-asset-item>
        <a-asset-item
          id="plasticItem2"
          src="../assets/plastic-trash/Soda.glb"
        ></a-asset-item>
        <a-asset-item
          id="plasticItem3"
          src="../assets/plastic-trash/bag.glb"
        ></a-asset-item>
      </a-assets>

      <a-sky color="#87CEEB"></a-sky>

      <a-light
        type="point"
        color="#ffdca8"
        intensity="2"
        distance="500"
        position="0 20 0"
      >
      </a-light>

      <a-entity id="player" movement-controls="fly: false; speed: 0.2">
        <a-camera position="0 0.5 0">
        </a-camera>
        
        <a-entity
          id="left-hand"
          hand-controls="hand: left; modelStyle: highPoly"
          sphere-collider="objects: .grabbable"
          super-hands>
        </a-entity>

        <a-entity
          id="right-hand"
          hand-controls="hand: right; modelStyle: highPoly"
          sphere-collider="objects: .grabbable"
          super-hands>
        </a-entity>
      </a-entity>

      <a-cylinder
        id="bin"
        color="gray"
        height="1.5"
        radius="0.5"
        position="0 0 -5"
        static-body
        delete-on-contact="target: .grabbable"
      ></a-cylinder>

      <a-box
        class="ground"
        position="0 -1 0"
        scale="60 60 1"
        rotation="-90 0 0"
        src="../assets/textures/Ground/Ground093C_1K-JPG/Ground093C_1K-JPG_Color.jpg"
        repeat="60 60"
        static-body
      >
      </a-box>

      <a-plane
        id="ocean"
        position="0 -1 0"
        width="1000"
        height="1000"
        rotation="-90 0 0"
        src="../assets/textures/Ground/Ice003_1K-JPG/Ice003_1K-JPG_Color.jpg"
        repeat="1000 1000"
        static-body
      >
      </a-plane>

      <a-entity id="welcomeText" position="0 3.5 -3">
        <a-text
          value="'Build your boat'"
          color="#000000"
          align="center"
          width="4"
          font="https://cdn.aframe.io/fonts/mozillavr.fnt"
        >
        </a-text>
      </a-entity>

      <script>
        const planeWidth = 45;
        const planeHeight = 45;
        const planeOffsetZ = 0;

        for (let i = 0; i < 10; i++) {
          const tree = document.createElement("a-entity");
          tree.setAttribute("gltf-model", "#palmModel");
          tree.setAttribute("scale", "2 2 2");
          const x = Math.random() * planeWidth - planeWidth / 2;
          const z =
            Math.random() * planeHeight - planeHeight / 2 + planeOffsetZ;
          tree.setAttribute("position", `${x} -0.5 ${z}`);
          tree.setAttribute("rotation", `0 ${Math.random() * 360} 0`);
          document.querySelector("a-scene").appendChild(tree);
        }

        for (let i = 0; i < 8; i++) {
          const tree = document.createElement("a-entity");
          tree.setAttribute("gltf-model", "#palmModel");
          tree.setAttribute("scale", "2.5 2.5 2.5");
          const x = Math.random() * planeWidth - planeWidth / 2;
          const z =
            Math.random() * planeHeight - planeHeight / 2 + planeOffsetZ;
          tree.setAttribute("position", `${x} -0.5 ${z}`);
          tree.setAttribute("rotation", `0 ${Math.random() * 360} 0`);
          document.querySelector("a-scene").appendChild(tree);
        }

        for (let i = 0; i < 6; i++) {
          const tree = document.createElement("a-entity");
          tree.setAttribute("gltf-model", "#palmModel");
          tree.setAttribute("scale", "3.5 3.5 3.5");
          const x = Math.random() * planeWidth - planeWidth / 2;
          const z =
            Math.random() * planeHeight - planeHeight / 2 + planeOffsetZ;
          tree.setAttribute("position", `${x} -0.5 ${z}`);
          tree.setAttribute("rotation", `0 ${Math.random() * 360} 0`);
          document.querySelector("a-scene").appendChild(tree);
        }

        for (let i = 0; i < 4; i++) {
          const tree = document.createElement("a-entity");
          tree.setAttribute("gltf-model", "#palmModel");
          tree.setAttribute("scale", "4 4 4");
          const x = Math.random() * planeWidth - planeWidth / 2;
          const z =
            Math.random() * planeHeight - planeHeight / 2 + planeOffsetZ;
          tree.setAttribute("position", `${x} -0.5 ${z}`);
          tree.setAttribute("rotation", `0 ${Math.random() * 360} 0`);
          document.querySelector("a-scene").appendChild(tree);
        }
      </script>

      <script>
        const sandWidth = 55;
        const sandHeight = 55;
        const sandOffsetZ = 0;

        const numPlastic1 = 55;
        const numPlastic2 = 70;
        const numPlastic3 = 10;

        for (let i = 0; i < numPlastic1; i++) {
          const plastic = document.createElement("a-entity");
          plastic.setAttribute("gltf-model", "#plasticItem1");
          plastic.setAttribute(
            "position",
            `${Math.random() * sandWidth - sandWidth / 2} -0.4 ${
              Math.random() * sandHeight - sandHeight / 2 + sandOffsetZ
            }`
          );
          plastic.setAttribute("scale", "0.1 0.1 0.1");
          plastic.setAttribute("rotation", `90 0 ${Math.random() * 360}`);
          
          // Updated attributes for Super Hands and Physics
          plastic.setAttribute("grabbable", "");
          plastic.setAttribute("dynamic-body", "mass: 0.2");
          plastic.setAttribute("class", "grabbable");
          
          document.querySelector("a-scene").appendChild(plastic);
        }

        for (let i = 0; i < numPlastic2; i++) {
          const plastic = document.createElement("a-entity");
          plastic.setAttribute("gltf-model", "#plasticItem2");
          plastic.setAttribute(
            "position",
            `${Math.random() * sandWidth - sandWidth / 2} -0.4 ${
              Math.random() * sandHeight - sandHeight / 2 + sandOffsetZ
            }`
          );
          plastic.setAttribute("scale", "2 2 2");
          plastic.setAttribute("rotation", `0 ${Math.random() * 360} 0`);
          
          // Updated attributes for Super Hands and Physics
          plastic.setAttribute("grabbable", "");
          plastic.setAttribute("dynamic-body", "mass: 0.2");
          plastic.setAttribute("class", "grabbable");

          document.querySelector("a-scene").appendChild(plastic);
        }

        for (let i = 0; i < numPlastic3; i++) {
          const plastic = document.createElement("a-entity");
          plastic.setAttribute("gltf-model", "#plasticItem3");
          plastic.setAttribute(
            "position",
            `${Math.random() * sandWidth - sandWidth / 2} -0.2 ${
              Math.random() * sandHeight - sandHeight / 2 + sandOffsetZ
            }`
          );
          plastic.setAttribute("scale", "3 3 3");
          plastic.setAttribute("rotation", `0 0 0`);

          // Updated attributes for Super Hands and Physics
          plastic.setAttribute("grabbable", "");
          plastic.setAttribute("dynamic-body", "mass: 0.2");
          plastic.setAttribute("class", "grabbable");

          document.querySelector("a-scene").appendChild(plastic);
        }
      </script>

      <script>
        setTimeout(() => {
          const text = document.querySelector("#welcomeText");
          if (text) text.setAttribute("visible", false);
        }, 10000);
      </script>
    </a-scene>
  </body>
</html>